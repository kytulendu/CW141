                                  ตอนที่ 4
                      การแก้ไขรูปแบบตัวอักษร

          CUWRITER ยอมให้ผู้ใช้แก้ไขรูปแบบตัวอักษรต่าง ๆ ตามต้องการหรือแม้แต่เปลี่ยนตัวอักษร
บางตัวเป็นตัวอื่น เช่น ผู้ใช้ไม่มีความจำเป็นต้องใช้เครื่องหมายดนตรี แต่มีความต้องการใช้ตัวอักษรอื่น ๆ ที่
ไม่มีปรากฏใน CUWRITER ก็สามารถทำได้ด้วยการเรียกใช้โปรแกรม CUFONT
          รูปแบบตัวอักษรต่าง ๆ ที่จำเป็นต้องใช้ประกอบการทำงานของ CUWRITER มีทั้งรูปแบบตัว
อักษรที่จะแสดงบนจอภาพ   และการพิมพ์ทางเครื่องพิมพ์  ซึ่งผู้ใช้จะสังเกตได้จากชื่อแฟ้มข้อมูลที่ลงท้ายด้วย
.PRNและ.P24 จะเป็นแฟ้มข้อมูลตัวอักษรที่ใช้สำหรับการพิมพ์บนเครื่องพิมพ์แบบ 9 PINS และ 24 PINS 
ตามลำดับ ส่วนแฟ้มข้อมูลที่ลงท้ายด้วย .FON จะใช้สำหรับการแสดงรูปแบบตัวอักษรบนจอภาพ
          ดังนั้นเมื่อผู้ใช้ต้องการแก้ไขรูปแบบตัวอักษร จะต้องเรียกแฟ้มข้อมูลตัวอักษรทั้งหมดมาแก้ไขด้วย
การใช้โปรแกรม CUFONT ดังมีรายละเอียดต่อไปนี้

วิธีใช้งาน

     เริ่มต้นเรียกโปรแกรมที่ prompt แล้วลองสักครู่จะปรากฏเมนูบนจอ

Main Menu                            

 1.load screen font                  
 2.load italic screen font           
 3.load 9 pins font                  
 4.load italic 9 pins font           
 5.load 24 pins font                 
 6.load italic 24 pins font          
 7.load superscript&subscript font   
 8.load italic super&subscript font  
 9.load .FED font                    
10.save font                         
11.continue working                  
12.exit                              



     รายการที่ ๑  จะเป็นการ load font จอภาพตัวปรกติที่ใช้ในการแสดงผลของโปรแกรม CUWRITER 
                 (normal.fon)
     รายการที่ ๒   จะเป็นการ load font จอภาพตัวเอน (italic.fon)
     รายการที่ ๓   จะเป็นการ load font เครื่องพิมพ์ขนาด 9 pins ตัวปรกติ (normal.prn)
     รายการที่ ๔   จะเป็นการ load font เครื่องพิมพ์ขนาด 9 pins ตัวเอน (italic.prn)
     รายการที่ ๕   จะเป็นการ load font เครี่องพิมพ์ขนาด 24 pins ตัวปรกติ (normal.p24)
     รายการที่ ๖   จะเป็นการ load font เครื่องพิมพ์ขนาด 24 pins ตัวเอน (italic.p24)
     รายการที่ ๗ จะเป็นการ load superscript และ subscript ของเครื่องพิมพ์แบบ 24 pins 
                 (normals.p24)
     รายการที่ ๘ จะเป็นการ load font ตัวเอนแบบ superscript และ subscript ของเครื่อง
                 พิมพ์แบบ 24 pins (italics.p24)
     รายการที่ ๙ จะเป็นการ load font file ซึ่งเป็น format ของโปรแกรมนี้ซึ่งรายละเอียดอยู่
                 ท้ายคู่มือนี้
     รายการที่ ๑๐ เป็นการ save file  ที่ได้รับการแก้ไขแล้ว
     รายการที่ ๑๑ เป็นการแก้ไข font ที่ได้ load เข้ามาซึ่งรายละเอียดในการแก้ไข font มีดังนี้

     ขั้นแรกจะเป็นการเลือกตัวอักษรที่ต้องการแก้ไข โดยเลือกจากบนจอ โดยการเลื่อนกรอบสี่เหลี่ยมไป
บนตัวอักษรที่ต้องการแล้วกด <Enter> แต่ถ้าไม่ต้องการแก้ไขแล้วให้กดปุ่ม <ESC> เพื่อกลับไปยัง menu 
หลัก เพื่อ save font หรือ load file ใหม่ หรือ ออกจากโปรแกรม     ในระหว่างที่ทำการ edit 
font  สามารถกด '?' เพื่อขอความช่วยเหลือได้ โดยจะมีคำอธิบายสั้น ๆ ปรากฎบนจอภาพ และเมื่อกดปุ่ม
อะไรก็ตาม คำอธิบายจะหายไป จากนั้นก็เริ่มทำการ edit font ได้
          function ที่ใช้ได้ในระหว่าง edit font ได้แก่
          - คีย์ลูกศร เพื่อเลื่อน cursor ไปยังตำแหน่งต่าง ๆ บนจอ  สามารถกดปุ่ม Home, PgUp, 
End , PgDn เพื่อเลื่อน cursor ไปในแนวทแยงได้ด้วย
          - ปุ่ม insert ( ปุ่ม 0 ที่ keypad ) เมื่อกดบนจุดที่ว่างอยู่ จะทำหน้าที่ plot จุดลงไป แต่
ถ้ากดบนจุดที่ plot แล้วจะลบจุดเดิมออก
          - ปุ่ม I เพื่อ invert ตัวอักษร เมื่อกดปุ่มนี้ จุดทุกจุดของตัวอักษรนั้นที่ plot แล้วจะถูกลบ 
ส่วนจุดที่ว่างอยู่จะถูก plot ลงไป
          -  ปุ่ม M เพื่อ Mirror ตัวอักษร เมื่อกดปุ่มนี้ ตัวอักษร จะถูกกลับข้างเหมือนกับมองจากกระจก
          -  ปุ่ม Esc เพื่อเลิกการ edit ตัวอักษรนั้น
          - ปุ่ม U เพื่อ undo คือจะยกเลิกการเปลี่ยนแปลงที่เกิดขึ้นในการ edit ครั้งนั้น ใช้เมื่อเรา 
edit font แล้วเกิดข้อผิดพลาดแล้วไม่ต้องการ
          - ปุ่ม R เพื่อ Row insert จะทำการแทรกแถวว่างในแนวนอน ในแถวที่ cursor เราอยู่ 1 
แถว
          -  ปุ่ม E เพื่อ Erase row คือ ทำการลบแถวในแนวนอน ในแถวที่ cursor เราอยู่ 1 แถว
          - ปุ่ม C เพื่อ Column insert เพื่อทำการแทรกแถวในแนวตั้ง ในแถวที่ cursor เราอยู่ 1 
แถว
          -  ปุ่ม D เพื่อ Delete column เพื่อทำการลบแถวในแนวตั้งในแถวที่ cursor เราอยู่ 1 แถว
          
          ในระหว่างการ edit จะมี mode ของการ edit ปรากฎที่มุมขวาล่างดังนี้
               MOVE MODE ใน mode นี้ cursor จะทำการเลื่อนข้ามไปบนจุดต่างๆ
               DRAW MODE ใน mode นี้ cursor จะทำการลากเส้นไปบนทุกจุด
               ERASE MODE ใน mode นี้ cursor จะทำการลบจุดทุกจุดที่ cursor เลื่อนผ่าน

          ซึ่งจะมีตัวบอก mode ของการ edit เหล่านี้อยู่บนจอตลอดเวลา
     รายการที่ ๑๒ จะออกจากโปรแกรม กลับสู่ระบบปฎิบัติงาน

FILE FORMAT
     ชื่อของ font file โดยปกติจะมีนามสกุลเป็น .FED มีลักษณะของแฟ้มดังนี้
     byte           content
     1-23      FONT EDITOR Version 1.0
     24        ^Z
     25        จำนวน dots ของ font ในแนวนอน
     26        จำนวน dots ของ font ในแนวตั้ง
     27...     เก็บ font โดยสามารถคำนวนขนาดของ font ได้จากสูตร
                          _ceil(X,8)*Y*256
                    เมื่อ X,Y เป็นจำนวน dots ในแนวนอน และแนวตั้งตามลำดับ โดย _ceil เป็น
                    function ที่ return ค่าเป็น integer ที่มากกว่าหรือเท่ากับ parameter ตัว
                    แรก หารด้วย parameter ตัวที่ ๒ ของมัน

          int _ceil(int x,int y)
          {
               return x/y+((x%y)?1:0);
          }

     font ที่เก็บจะเก็บเรียงกันไปทีละ byte จากซ้ายไปขวา จากบนลงล่าง ในกรณีที่เหลือเศษไม่ครบ 
byte จะเก็บ 1 byte ไปเลย เช่น font ขนาด 22x16 จะมีขนาดดังนี้

          22 bit จะเก็บใน 3 bytes
               จะได้ขนาด = 3 x 16 x 256 bytes แล้วบวกความยาวของ header ซึ่งมีค่า 26 
bytes จะได้เป็น ขนาดของ font file 

     ในที่นี้มี utility ที่จะทำหน้าที่แปลงข้อมูลจาก font .FED ให้เป็น font .PRN ของเครื่องพิมพ์ 
หรือ .FON ของจอภาพได้ และ utility ที่จะแปลงกลับได้ด้วย เพื่อเป็นตัวอย่างในการนำแฟ้มข้อมูล .FED 
ไปใช้ในงานอื่นๆ ได้
     
     ใน version นี้ ขนาดของ font ได้กำหนดไว้ว่า ไม่เกิน 64 x 64 dots